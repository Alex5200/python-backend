# Auth API: JWT + Session Cookies

–ì–∏–±—Ä–∏–¥–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:
- **JWT** ‚Äî –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, SPA, –≤–Ω–µ—à–Ω–∏—Ö API.
- **–°–µ—Å—Å–∏–∏ –≤ PostgreSQL** ‚Äî –¥–ª—è –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä–æ–≤ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ SSR, logout –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é).

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **FastAPI** ‚Äî –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–µ—Å—Å–∏–π
- **SQLAlchemy** ‚Äî ORM
- **Passlib + bcrypt** ‚Äî —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **PyJWT** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ JWT

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|-----------|
| `main.py` | –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞. –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`/register`, `/login`, `/profile`, `/logout`) |
| `models.py` | SQLAlchemy-–º–æ–¥–µ–ª–∏: `User`, `UserSession` |
| `schemas.py` | Pydantic-—Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ—Ç–≤–µ—Ç–æ–≤ |
| `security.py` | –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π, JWT-—Ç–æ–∫–µ–Ω—ã, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ |
| `crud.py` | –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î: —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–µ—Å—Å–∏–∏ –∏ —Ç.–¥. |
| `database.py` | –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL |

---

## üöÄ –ó–∞–ø—É—Å–∫

1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
    ```bash
    pip install fastapi uvicorn sqlalchemy psycopg2-binary passlib[bcrypt] python-jose[cryptography] python-dotenv
    ```
    ### –ï—Å—Ç—å .env.dev –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥ –ø–æ–¥ —Å–µ–±—è
    ```
    DATABASE_URL=postgresql://user:password@localhost/auth_db
    SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–¥–ª–∏–Ω–æ–π_–º–∏–Ω–∏–º—É–º_32_—Å–∏–º–≤–æ–ª–∞
    ```
    ### –ó–∞–ø—É—Å–∫ 
     ```
     python main.py
    ```


# –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

<img src="./—Å—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.png" />